@model Casusvictuz.Comment

<li>
    <strong>@Model.User.Name</strong> - @Model.Content

    <button type="button" onclick="toggleReplyForm(@Model.Id)" class="btn btn-link">Reply</button>
    <div id="replyForm-@Model.Id" style="display:none;">
        <form asp-action="CreateReply" method="post">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                        
            <div class="form-group">
                <label asp-for="Content" class="control-label"></label>
                <input type="text" name="Content" class="form-control" />
                <span asp-validation-for="Content" class="text-danger"></span>
            </div>
    
            <input type="hidden" name="ThreadId" value="@Model.ThreadId" />
            <input type="hidden" name="ParentCommentId" value="@Model.Id" />
            <input type="submit" value="Reply" class="btn btn-primary" />
        </form>
    </div>
   
    
    @if (Model.Replies != null && Model.Replies.Any())
    {
        <ul>
            @foreach (var reply in Model.Replies)
            {
                @Html.Partial("_CommentTree", reply) 
            }
        </ul>
    }
</li>

<script>
    function toggleReplyForm(commentId) {
        var form = document.getElementById("replyForm-" + commentId);
        if (form.style.display === "none") {
            form.style.display = "block";
        } else {
            form.style.display = "none";
        }
    }
</script>